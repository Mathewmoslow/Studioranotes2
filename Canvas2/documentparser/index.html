<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summer 2025 Nursing Schedule Dashboard</title>
    
    <!-- External Dependencies -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css">
    
    <!-- Internal Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Enhanced Debug Console -->
    <div id="debug-console" class="debug-console">
        <div class="debug-header">
            <div class="debug-title">üõ†Ô∏è Debug Console</div>
            <div class="debug-controls">
                <button class="debug-btn clear" onclick="clearDebugConsole()">Clear</button>
                <button class="debug-btn minimize" onclick="toggleDebugConsole()">Minimize</button>
            </div>
        </div>
        <div class="debug-content" id="debug-content">
            <div class="debug-entry debug-info">
                <span class="debug-timestamp">[00:00:00]</span>
                Debug console initialized. Ready to capture logs...
            </div>
        </div>
        <div class="debug-stats" id="debug-stats">
            <div class="debug-stat">Logs: <span class="debug-stat-value" id="log-count">0</span></div>
            <div class="debug-stat">Errors: <span class="debug-stat-value" id="error-count">0</span></div>
            <div class="debug-stat">Warnings: <span class="debug-stat-value" id="warn-count">0</span></div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <h1>Summer 2025 Nursing Schedule</h1>
        <div>
            <button class="btn" onclick="showParser()">Import Documents</button>
            <button class="btn" onclick="exportData()">Export Data</button>
            <button class="btn" onclick="showImportDialog()">Import Data</button>
            <span style="margin-left: 20px;">Current Week: <span id="current-week">Week 1</span></span>
        </div>
    </div>

    <div class="container">
        <!-- Left Panel -->
        <div class="left-panel">
            <h2 style="margin-bottom: 15px;">Week <span id="week-number">1</span> Module Assignments</h2>
            
            <div class="selectors">
                <div class="selector-group">
                    <label>Jump to Week:</label>
                    <select id="week-selector" onchange="changeWeek(this.value)">
                        <!-- Options will be generated dynamically -->
                    </select>
                </div>
                <div class="selector-group">
                    <label>Select Course:</label>
                    <select id="course-selector" onchange="filterByCourse(this.value)">
                        <option value="all">All Courses</option>
                        <!-- More options will be added dynamically -->
                    </select>
                </div>
            </div>
            
            <div class="module-cards" id="module-cards">
                <div class="empty-state">
                    <p>No modules loaded yet. Click "Import Documents" to get started.</p>
                </div>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="right-panel">
            <div class="scheduler-controls">
                <h3>Adaptive Scheduler</h3>
                <div class="scheduler-settings">
                    <div class="setting-group">
                        <label>Daily Max Hours:</label>
                        <input type="number" id="daily-max" value="6" min="1" max="12">
                    </div>
                    <div class="setting-group">
                        <label>Weekend Max Hours:</label>
                        <input type="number" id="weekend-max" value="4" min="1" max="8">
                    </div>
                    <div class="setting-group">
                        <label>Block Duration:</label>
                        <input type="number" id="block-duration" value="1.5" min="0.5" max="3" step="0.5">
                    </div>
                </div>
                <button class="scheduler-button" onclick="generateStudySchedule()">Generate Study Schedule</button>
                <button class="scheduler-button" onclick="clearStudyBlocks()">Clear Study Blocks</button>
                <div id="scheduler-status"></div>
            </div>
            
            <div class="calendar-container">
                <div class="calendar-tabs">
                    <div class="tab active" data-view="month">Month</div>
                    <div class="tab" data-view="week">Week</div>
                    <div class="tab" data-view="list">List</div>
                </div>
                
                <div id="month-view" class="calendar-view active">
                    <div id="calendar-month"></div>
                </div>
                
                <div id="week-view" class="calendar-view">
                    <div id="calendar-week"></div>
                </div>
                
                <div id="list-view" class="calendar-view">
                    <div class="week-schedule" id="week-schedule">
                        <div class="empty-state">
                            <p>No events scheduled. Import your course materials to view schedule.</p>
                        </div>
                    </div>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color lecture"></div>
                        <span>Lectures</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color clinical"></div>
                        <span>Clinical</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color exam"></div>
                        <span>Exams</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color quiz"></div>
                        <span>Quizzes</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color prep"></div>
                        <span>Prep Work</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color assignment"></div>
                        <span>Assignments</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color simulation"></div>
                        <span>Simulation</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color study"></div>
                        <span>Study Time</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="review-modal" class="parser-modal">
        <div class="parser-content" style="max-width: 900px;">
            <div class="parser-header">
                <h2>Review & Assign Courses</h2>
                <button class="btn" onclick="hideReviewModal()">Close</button>
            </div>
            
            <div class="parser-body" style="flex-direction: column; gap: 20px;">
                <div id="review-content" style="max-height: 400px; overflow-y: auto;">
                    <!-- Review content will be populated here -->
                </div>
            </div>
            
            <div class="parser-footer">
                <button class="btn" onclick="backToParser()">Back</button>
                <button class="import-button" onclick="confirmImport()">Confirm Import</button>
            </div>
        </div>
    </div>
    
    <!-- Document Parser Modal -->
    <div id="parser-modal" class="parser-modal">
        <div class="parser-content">
            <div class="parser-header">
                <h2>Import Course Documents</h2>
                <button class="btn" onclick="hideParser()">Close</button>
            </div>
            
            <div class="parser-tabs">
                <div class="tab active" data-tab="text-input">Text Input</div>
                <div class="tab" data-tab="ics-upload">Calendar Upload (ICS)</div>
            </div>
            
            <div id="text-input-tab" class="parser-tab-content active">
                <div class="parser-body">
                    <div class="parser-input">
                        <h3>Input Document</h3>
                        <div style="margin: 10px 0;">
                            <select class="template-select" id="template-select" onchange="loadTemplate()">
                                <option value="">Select template...</option>
                                <option value="canvas">Canvas Copy/Paste</option>
                                <option value="syllabus">Syllabus Format</option>
                                <option value="outline">Course Outline</option>
                                <option value="custom">Custom Format</option>
                            </select>
                            <button class="btn" onclick="parseDocument()">Parse Document</button>
                        </div>
                        <textarea id="document-input" class="parser-textarea" 
                                 placeholder="Paste your course materials here..."></textarea>
                    </div>
                    
                    <div class="parser-output">
                        <h3>Parsed Results</h3>
                        <div id="parser-messages"></div>
                        <div id="parser-results" class="parser-results">
                            <!-- Parsed results will appear here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="ics-upload-tab" class="parser-tab-content">
                <div class="parser-body" style="flex-direction: column; align-items: center; justify-content: center;">
                    <div style="text-align: center; max-width: 600px;">
                        <h3>Upload Calendar File (ICS)</h3>
                        <p style="margin: 15px 0; color: #666;">
                            Upload an ICS calendar file exported from Canvas, Blackboard, 
                            or any other calendar application.
                        </p>
                        
                        <div class="file-upload-area">
                            <input type="file" id="ics-file-input" accept=".ics" 
                                   style="display: none;" onchange="handleICSFileSelect(this)">
                            <button class="btn btn-large" onclick="document.getElementById('ics-file-input').click()">
                                Select ICS File
                            </button>
                            <div id="selected-file-name" style="margin-top: 10px; font-size: 14px; color: #666;"></div>
                        </div>
                        
                        <button id="parse-ics-btn" class="import-button" 
                                style="margin-top: 20px; display: none;" 
                                onclick="parseICSFile()">
                            Parse Calendar File
                        </button>
                    </div>
                    
                    <div class="parser-output" style="width: 100%; margin-top: 20px;">
                        <h3>Parsed Calendar Results</h3>
                        <div id="ics-parser-messages"></div>
                        <div id="ics-parser-results" class="parser-results">
                            <!-- ICS parsed results will appear here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="parser-footer">
                <button class="btn" onclick="clearParser()">Clear</button>
                <button class="import-button" onclick="reviewBeforeImport()">Review & Import</button>
            </div>
        </div>
    </div>

    <!-- Data Import Modal -->
    <div id="import-modal" class="parser-modal">
        <div class="parser-content" style="max-width: 600px; height: auto;">
            <div class="parser-header">
                <h2>Import Schedule Data</h2>
                <button class="btn" onclick="hideImportDialog()">Close</button>
            </div>
            
            <div class="parser-body" style="flex-direction: column;">
                <div style="margin-bottom: 20px;">
                    <h3>Upload Data File</h3>
                    <p>Select a JSON file exported from another device to import your schedule data.</p>
                    <input type="file" id="import-file" accept=".json" style="margin-top: 10px;">
                </div>
                
                <div id="import-preview" style="display: none;">
                    <h3>Preview</h3>
                    <div id="import-preview-content" class="parser-results" style="max-height: 200px;">
                        <!-- Preview content will appear here -->
                    </div>
                </div>
                
                <div id="import-messages"></div>
            </div>
            
            <div class="parser-footer">
                <button class="btn" onclick="clearImportDialog()">Clear</button>
                <button class="import-button" onclick="importDataFile()">Import Data</button>
            </div>
        </div>
    </div>

    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    
    <!-- Application Scripts -->
    <script src="js/debug.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/parser.js"></script>
    <script src="js/modules.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/scheduler.js"></script>
    <script src="js/main.js"></script>
</body>
</html>